<section id="ztab" #ztabsection (click)="clickOnZtab()">
    <section id="wrap-search"  *ngIf="ztabUser.webSites[0] !== undefined" (click)="$event.stopPropagation()">
        <div id="wrap-input-search">
            <div class="wrap-log">
                <img src="{{ztabUser.webSites[0]['logo']}}" (click)="showListWebsites=true">
            </div>
            <input type="search" (keyup)="searchByKeywords($event)">
        </div>
        <section id="wrap-search-websites" *ngIf="showListWebsites">
            <article *ngFor="let item of ztabUser.webSites;let key = index;" class="website">
                <div class="wrap-delete wrap-action">
                    <i class="bi bi-x" (click)="deleteWebSite(key)"></i>
                </div>
                <div class="wrap-logo">
                    <img src="{{item.logo}}">
                </div>
                <div>{{item.title}}</div>
            </article>
            <article class="website" (click)="switchSectionForm(1, null)">
                <div class="wrap-logo">
                    <i class="bi bi-plus"></i>
                </div>
                <div class="text-center">Add</div>
            </article>
        </section>
    </section>

    <section id="section1" *ngIf="section===1">
        <i class="bi bi-browser-safari btn-section" (click)="section=2"></i>
    </section>

    <section id="section2" *ngIf="section===2">
        <i class="bi bi-boxes btn-section" (click)="section=1"></i>
    </section>
    
    <section id="section-forms" #section_form (click)="$event.stopPropagation()">
        <form *ngIf="reactiveForm !== null" [formGroup]="reactiveForm" (ngSubmit)="sendForm()">
            <section class="wrap-title">
                <div>
                    <i class="bi bi-chevron-left pointer" (click)="switchSectionForm(null, null)"></i>
                    <h3>
                        <ng-container *ngIf="formType===1">Search engine</ng-container>
                    </h3>
                </div>
                <div>
                    <p-button label="Submit" type="sumbit" size="small" class="ok" [disabled]="reactiveForm.invalid || photoUrl === null"></p-button>
                </div>
            </section>

            <ng-container *ngIf="formType===1">
                <div class="mb-3">
                    <label for="title">Title*</label>
                    <input 
                        pInputText 
                        id="title"
                        name="title"
                        class="block h-8 w-full"
                        formControlName="title"
                    />
                    <div *ngIf="reactiveForm.get('title')?.touched && reactiveForm.get('title')?.invalid" class="mt-1">
                        <div *ngIf="reactiveForm.get('title')?.hasError('required')" class="alert">
                            The title is required
                        </div>
                        <div *ngIf="reactiveForm.get('title')?.hasError('maxlength')" class="alert">
                            10 characters max
                        </div>
                    </div>
                </div>
                <div class="mb-3">
                    <label for="link">Link*</label>
                    <input 
                        pInputText 
                        id="link"
                        name="link"
                        class="block h-8 w-full"
                        formControlName="link"
                    />
                    <small id="username-help">
                        exemple: https://www.google.com/search?q=
                    </small>
                    <div *ngIf="reactiveForm.get('link')?.touched && reactiveForm.get('link')?.invalid" class="mt-1">
                        <div *ngIf="reactiveForm.get('link')?.hasError('required')" class="alert">
                            The link is required
                        </div>
                    </div>
                </div>
            </ng-container>
        </form>
        <div class="mt-3">
            <label>Logo*</label>
            <div class="flex justify-center rounded-lg border-2 p-1">
                <p-selectButton 
                name="image-state"
                [options]="stateOptions" 
                [(ngModel)]="stateValue"
                size="small"
                 ></p-selectButton>
            </div>
        </div>
        <section class="pt-3">
            <ng-container *ngIf="stateValue==='1'">
                <!-- <label for="url-to-image">Url to a image</label>
                <input 
                    pInputText 
                    id="url-to-image"
                    name="url-to-image"
                    class="block h-8 w-full"
                    (focusout)="handleFile($event)"
                /> -->
            </ng-container>
            <ng-container *ngIf="stateValue==='2'">
                <label for="input-file" class="flex justify-center w-full p-1 rounded-md border-2 pointer text-[20px]">
                    <i class="bi bi-cloud-arrow-up-fill"></i>
                </label>
                <input class="hidden" type="file" id="input-file" (change)="handleFile($event)">
            </ng-container>
            <ng-container *ngIf="photoUrl !== null">
                <img src="{{photoUrl}}" alt="" class="mt-2">
            </ng-container>
        </section>
    </section>

    <p-toast></p-toast>
</section>
